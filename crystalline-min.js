var CrystallineDOM=function(){function a(a,b){var c=document.createElement("div");for(c.innerHTML=b;c.firstChild;)a.appendChild(c.firstChild)}function b(a){var b=document,c=b.createElement("script");c.src=a,c.setAttribute("data-timestamp",+new Date),(b.head||b.body).appendChild(c)}function c(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(){c.readyState==XMLHttpRequest.DONE&&200==c.status&&b(c.responseText)},c.send()}return{renderString:a,requireJS:b,ajaxGet:c}}(),Crystalline=function(){function e(b){var c=new Date(b);return c.getDate()+" "+a[c.getMonth()]+" "+c.getFullYear()}function f(){for(var d,a={},b=/[?&]([^=#]+)=([^&#]*)/g,c=window.location.href;d=b.exec(c);)a[d[1]]=d[2];return a}function g(a){a.forEach(function(a){var b=c.join("");b=b.replace(/DATE/g,e(a.date)),b=b.replace(/TITLE/g,a.title),b=b.replace(/SHORT/g,a.date+"-"+a.short),b=b.replace(/DESCRIPTION/g,a.desc),CrystallineDOM.renderString(d,b)})}function h(a,b){CrystallineDOM.renderString(d,'<div id="disqus_thread"></div>'),window.disqus_config=function(){this.page.url=b.pageUrl,this.page.identifier=a},CrystallineDOM.requireJS("//"+b.disqusId+".disqus.com/embed.js")}function i(a,c){CrystallineDOM.ajaxGet("/posts/"+a+".md",function(e){CrystallineDOM.renderString(d,b.makeHtml(e)),c&&c.pageUrl&&c.disqusId&&h(a,c)})}function j(a){var b=f();d=a.container||document.getElementById("content"),b.postId?i(b.postId,a.disqus):g(a.posts)}var d,a=["January","February","March","April","May","June","July","August","September","October","November","December"],b=new showdown.Converter,c=["<div>",'<p class="date">DATE</p>','<a href="?postId=SHORT" class="title">TITLE</a>','<p class="desc">DESCRIPTION</p>','<a href="?postId=SHORT" class="more">READ MORE</a>',"</div>"];return{init:j}}();
